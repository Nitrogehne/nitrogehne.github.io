<article id="pokemongo">
    <h3>완벽 포켓몬 수집을 목표로 하고있습니다.</h3>
    <div class="flex">
        <table id="pokemongo_tb">
            <thead></thead>
            <tbody></tbody>
        </table>
    </div>
</article>
<link rel="stylesheet" href="${path}/style.css" />
<script src="${path}/pokemon_names.js"></script>
<script src="${path}/perfect_pokemons.js"></script>
<script>
    var test = 0;
    var table_title = ["사탕 그룹", "도감 번호", "모습", "특별한 기술", "기타"];
    var thead = $("#pokemongo_tb thead");
    for (let title of table_title) {
        let th = $("<th>");
        th.html(title);
        thead.append(th);
    }
    var tbody = $("#pokemongo_tb tbody");
    var icon = $("<div>").addClass("icon");
    var txt = $("<div>").addClass("txt");
    var odd = false;
    for (let obj of perfect_pokemons) {
        if (test) console.log(obj);
        let tr = $("<tr>");
        tbody.append(tr);
        if (obj.hasOwnProperty("candy_group") && obj["candy_group"]) {
            odd = !odd;
        }
        if (!odd) tr.addClass("odd");
        for (let title of table_title) {
            let td = $("<td>");
            tr.append(td);
            switch (title) {
                case "사탕 그룹":
                    if (
                        obj.hasOwnProperty("candy_group") &&
                        obj["candy_group"]
                    ) {
                        td.html(obj["candy_group"]);
                    }
                    break;
                case "도감 번호":
                    if (obj.hasOwnProperty("pokedex_no") && obj["pokedex_no"]) {
                        td.html(obj["pokedex_no"]);
                    }
                    break;
                case "모습":
                    if (obj.hasOwnProperty("shiny") && obj["shiny"]) {
                        td.append(icon.clone().addClass("shiny"));
                    }
                    if (obj.hasOwnProperty("shadow") && obj["shadow"]) {
                        td.append(icon.clone().addClass("shadow"));
                    }
                    if (obj.hasOwnProperty("purified") && obj["purified"]) {
                        td.append(icon.clone().addClass("purified"));
                    }
                    if (obj.hasOwnProperty("costume") && obj["costume"]) {
                        td.append(txt.clone().html(obj["costume"]));
                    }
                    if (obj.hasOwnProperty("region") && obj["region"]) {
                        let region = "";
                        switch (obj["region"]) {
                            case "a":
                                region = "알로라";
                                break;
                            case "g":
                                region = "가라르";
                                break;
                            case "h":
                                region = "히스이";
                                break;
                        }
                        td.append(txt.clone().html(region));
                    }
                    if (obj["name"]) {
                        td.append(txt.clone().html(obj.name));
                    } else if (
                        obj.hasOwnProperty("pokedex_no") &&
                        obj["pokedex_no"] &&
                        pokemon_names[obj["pokedex_no"]]
                    ) {
                        td.append(
                            txt
                                .clone()
                                .html(pokemon_names[obj["pokedex_no"]][0])
                        );
                    }
                    switch (obj.sex) {
                        case "m":
                            td.append(txt.clone().html("♂"));
                            break;
                        case "f":
                            td.append(txt.clone().html("♀"));
                            break;
                    }
                    break;
                case "특별한 기술":
                    if (
                        obj.hasOwnProperty("knows_attack") &&
                        obj["knows_attack"]
                    ) {
                        td.append(txt.clone().html(obj["knows_attack"]));
                    }
                    break;
                case "기타":
                    if (obj.hasOwnProperty("meet") && obj["meet"]) {
                        td.append(icon.clone().addClass("meet_" + obj["meet"]));
                    }
                    if (obj.hasOwnProperty("ball") && obj["ball"]) {
                        td.append(icon.clone().addClass("ball_" + obj["ball"]));
                    }
                    if (obj.hasOwnProperty("trade_date") && obj["trade_date"]) {
                        td.append(icon.clone().addClass("trade"));
                    }
                    break;
            }
            if (obj.hasOwnProperty("lucky") && obj["lucky"]) {
                tr.addClass("lucky");
            }
        }
    }
    function pkmg() {
        load_file({ target: "main", url: "${path}/pkmg.html" });
    }
</script>
