<article id="pokemongo">
    <h1>Pokémon GO</h1>
    <h3>완벽 포켓몬 수집을 목표로 하고있습니다.</h3>
    <table id="pokemongo_tb">
        <thead></thead>
        <tbody></tbody>
    </table>
</article>
<style>
    #pokemongo_tb {
        border-width: 3px;
        padding: 0 1em;
        margin: auto;
        border-collapse: collapse;
    }
    #pokemongo_tb thead {
    }
    #pokemongo_tb tbody tr.lucky td {
        background-color: #222;
        color: #fff;
        font-weight: bold;
    }
    #pokemongo_tb tbody td {
        padding: 0 1em;
    }
</style>
<script src="page/hobby/pokemongo/pokemon_names.js"></script>
<script src="page/hobby/pokemongo/perfect_pokemons.js"></script>
<script>
    const table_title_order = ["gr", "no", "fm", "nm", "sm", "pb", "cd", "td"];
    const table_title = {
        gr: "사탕 그룹", // group
        no: "도감 번호",
        fm: "모습", // form
        sn: "색이 다른", // shinylucky
        nm: "이름", // name
        sm: "특별한 기술", // special move
        pb: "볼", // poke ball
        cd: "잡은 날", // catch date
        td: "교환", // trade
        lk: "반짝반짝", //
    };
    let thead = $("#pokemongo_tb thead");
    for (let key of table_title_order) {
        let th = $("<th>");
        th.html(table_title[key]);
        thead.append(th);
    }
    let tbody = $("#pokemongo_tb tbody");
    for (let obj of perfect_pokemons) {
        console.log(obj);
        let tr = $("<tr>");
        for (let key of table_title_order) {
            let td = $("<td>");
            if (obj.hasOwnProperty(key)) {
                let html;
                switch (key) {
                    case "gr":
                    case "no":
                    case "fm":
                    case "cd":
                    case "sm":
                        td.html(obj[key]);
                        break;
                    case "nm":
                        let sn = "";
                        if (obj.hasOwnProperty("sn")) {
                            sn = $("<img>");
                            sn.attr("src", "page/hobby/pokemongo/shiny.png");
                        }
                        td.html(sn + pokemon_names[obj["no"]][0]);
                    case "pb":
                        if (obj.hasOwnProperty("pb")) {
                            let ball = $("<img>")
                                .css({
                                    width: "16px",
                                    height: "16px",
                                })
                                .attr(
                                    "src",
                                    "page/hobby/pokemongo/" +
                                        obj["pb"] +
                                        "b.webp"
                                );
                            console.log(ball);
                            td.append(ball);
                        }
                        break;
                    case "td":
                        td.html(obj[key]);
                        break;
                    case "lk":
                        td.addClass("lucky");
                        break;
                    default:
                        console.log(key, "처리 필요");
                }
                td.html(html);
            } else {
                //console.log(key, "없음");
            }
            tr.append(td);
            if (obj.hasOwnProperty("lk")) {
                tr.addClass("lucky");
            }
        }
        tbody.append(tr);
    }
</script>
