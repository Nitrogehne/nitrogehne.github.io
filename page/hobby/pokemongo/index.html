<article id="pokemongo">
    <h1>Pokémon GO</h1>
    <h3>완벽 포켓몬 수집을 목표로 하고있습니다.</h3>
    <table id="pokemongo_tb">
        <thead></thead>
        <tbody></tbody>
    </table>
</article>
<style>
    #pokemongo_tb {
        border-width: 3px;
        padding: 0 1em;
        margin: auto;
        border-collapse: collapse;
    }
    #pokemongo_tb thead th {
        background-color: #333;
        color: #e7dbed;
    }
    #pokemongo_tb tbody tr.lucky td {
        color: #d9c393;
        font-weight: bold;
    }
    #pokemongo_tb tbody td {
        padding: 0 1em;
    }
</style>
<script src="page/hobby/pokemongo/pokemon_names.js"></script>
<script src="page/hobby/pokemongo/perfect_pokemons.js"></script>
<script>
    var table_title_order = ["gr", "no", "fm", "sm", "pb", "cd", "td"];
    var table_title = {
        gr: "사탕 그룹", // group
        no: "번호",
        fm: "모습", // form
        sn: "색이 다른", // shinylucky
        nm: "이름", // name
        sm: "특별한 기술", // special move
        pb: "볼", // poke ball
        cd: "잡은 날", // catch date
        td: "교환", // trade
        lk: "반짝반짝", //
    };
    var thead = $("#pokemongo_tb thead");
    for (let key of table_title_order) {
        let th = $("<th>");
        th.html(table_title[key]);
        thead.append(th);
    }
    var tbody = $("#pokemongo_tb tbody");
    var sn =
        "<img src='page/hobby/pokemongo/shiny.png' style='width:16px;height:16px;'>";
    for (let obj of perfect_pokemons) {
        let tr = $("<tr>");
        for (let key of table_title_order) {
            let td = $("<td>");
            if (obj.hasOwnProperty(key)) {
                let html;
                switch (key) {
                    case "gr":
                    case "no":
                    case "cd":
                    case "sm":
                    case "td":
                        td.html(obj[key]);
                        break;
                    case "fm":
                        let html_arr = [];
                        if (obj.hasOwnProperty("sn")) {
                            html_arr.push(sh);
                        }
                        html_arr.push(obj[key]);
                        html_arr.push(pokemon_names[obj["no"]][0]);
                        td.html(html_arr.join(" "));
                        break;
                    case "pb":
                        let ball = $("<img>")
                            .css({
                                width: "16px",
                                height: "16px",
                            })
                            .attr(
                                "src",
                                "page/hobby/pokemongo/" + obj["pb"] + "b.webp"
                            );
                        td.append(ball);
                        break;
                    default:
                        console.log(key, "처리 필요");
                }
                td.html(html);
            } else {
                if (key === "fm") {
                    let html_arr = [];
                    if (obj.hasOwnProperty("sn")) {
                        html_arr.push(sn);
                    }
                    html_arr.push(pokemon_names[obj["no"]][0]);
                    td.html(html_arr.join(" "));
                }
            }
            tr.append(td);
            if (obj.hasOwnProperty("lk")) {
                tr.addClass("lucky");
            }
        }
        tbody.append(tr);
    }
</script>
