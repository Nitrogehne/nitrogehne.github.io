<nav id="main_menu"></nav>
<script>
    var menu = [
        {
            title: "Home",
            url: "page/home/index.html",
            sub: [{ title: "Colorset", url: "page/home/colorset/index.html" }],
        },
        {
            title: "nStory",
            url: "page/nstory/index.html",
        },
        {
            title: "App.",
            sub: [
                {
                    title: "Simple Counter",
                    url: "page/app/nCounter/index.html",
                    onclick:
                        "window.open(this.href, 'nCounter', 'width=200, height=100'); return false;",
                    target: "nCounter",
                },
                { title: "결! 합!", url: "page/app/combination/index.html" },
                {
                    title: "뭐 먹지?",
                    url: "page/app/what_eat/index.html",
                    style: "display: none;",
                },
            ],
        },
        {
            title: "Hobby",
            sub: [
                {
                    title: "nSound (Composition)",
                    url: "https://soundcloud.com/ehne",
                    icon: "img/icon_soundcloud.png",
                    target: "_blank",
                },
                { title: "BMS", url: "page/hobby/bms/index.html" },
                {
                    title: "nTube (YouTube)",
                    url: "https://www.youtube.com/user/Nitrogehne",
                    icon: "img/icon_youtube.png",
                    target: "_blank",
                },
                {
                    title: "nPump (Pump It Up)",
                    url: "https://www.youtube.com/c/nPump",
                    icon: "img/icon_youtube.png",
                    target: "_blank",
                },
            ],
        },
        {
            title: "Work",
            sub: [
                { title: "PIU ZERO", url: "page/work/piu_zero/index.html" },
                { title: "PIU NX", url: "page/work/piu_nx/index.html" },
                { title: "PIU NX2", url: "page/work/piu_nx2/index.html" },
                { title: "PIU NXA", url: "page/work/piu_nxa/index.html" },
                { title: "DMT3", url: "page/work/dm_t3/index.html" },
            ],
        },
        {
            title: "Link",
            sub: [
                {
                    title: "nPage",
                    url: "https://nitrogehne.github.io",
                    icon: "img/icon_github.png",
                    target: "_blank",
                    style: "display: none;",
                },
                {
                    title: "nTwitter",
                    url: "https://twitter.com/Nitrogehne",
                    icon: "img/icon_twitter.png",
                    target: "_blank",
                },
                {
                    title: "nLife",
                    url: "https://blog.naver.com/song_ms",
                    icon: "img/icon_naverblog.png",
                    target: "_blank",
                },
                {
                    title: "nEating",
                    url: "http://ehne.tistory.com/",
                    icon: "img/icon_tistory.png",
                    target: "_blank",
                    style: "display: none;",
                },
                {
                    title: "nSound",
                    url: "https://soundcloud.com/ehne",
                    icon: "img/icon_soundcloud.png",
                    target: "_blank",
                },
                {
                    title: "nThink",
                    url: "https://ehnethink.blogspot.com/",
                    icon: "img/icon_blogspot.png",
                    target: "_blank",
                },
                {
                    title: "nPhoto",
                    url: "https://www.instagram.com/nitrogehne/",
                    icon: "img/icon_instagram.png",
                    target: "_blank",
                },
                {
                    title: "nthTime",
                    url: "https://www.instagram.com/ehne_th_time/",
                    icon: "img/icon_instagram.png",
                    target: "_blank",
                },
                {
                    title: "nMemorise",
                    url: "https://www.instagram.com/ehne_memories/",
                    icon: "img/icon_instagram.png",
                    target: "_blank",
                    style: "display: none;",
                },
                {
                    title: "nMoka",
                    url: "https://www.instagram.com/ehne_nmoka/",
                    icon: "img/icon_instagram.png",
                    target: "_blank",
                },
                {
                    title: "nPoGO",
                    url: "https://www.instagram.com/ehne_pokemongo/",
                    icon: "img/icon_instagram.png",
                    target: "_blank",
                },
                {
                    title: "nTube",
                    url: "https://www.youtube.com/user/Nitrogehne",
                    icon: "img/icon_youtube.png",
                    target: "_blank",
                },
                {
                    title: "nPump",
                    url: "https://www.youtube.com/c/nPump",
                    icon: "img/icon_youtube.png",
                    target: "_blank",
                },
                {
                    title: "nTwitch",
                    url: "https://www.twitch.tv/nitrogehne",
                    icon: "img/icon_twitch.png",
                    target: "_blank",
                },
                {
                    title: "n트게더",
                    url: "https://tgd.kr/nitrogehne",
                    icon: "img/icon_tgd.png",
                    target: "_blank",
                },
            ],
        },
        // [ "Visit" ],
    ];

    var init_menu = (parent, sub, lv) => {
        console.log(parent, sub, lv);
        let ul = document.createElement("ul");
        for (let i in sub) {
            let obj = sub[i];
            let li = document.createElement("li");
            li.setAttribute("data-lv", lv);
            let a = document.createElement("a");
            let innerHTML = "";
            if (!!obj.icon)
                innerHTML = "<img class='icon' src='" + obj.icon + "'> ";
            innerHTML += obj.title;
            a.innerHTML = innerHTML;
            a.setAttribute(
                obj.target ? "href" : "data-url",
                obj.url ? obj.url : ""
            );
            a.setAttribute("data-target", obj.target ? "" : "main");
            for (let i in obj) {
                if (["title", "url", "icon", "sub"].includes(i)) continue;
                a.setAttribute(i, obj[i]);
            }
            li.appendChild(a);
            ul.appendChild(li);
            if (obj.sub) init_menu(li, obj.sub, lv + 1);
        }
        parent.appendChild(ul);
    };

    var nav = document.querySelector("nav#main_menu");
    init_menu(nav, menu, 1);
    document.querySelector("li").setAttribute("class", "current");
</script>
